{"version":3,"sources":["components/Search/reducer.js","store.js","components/Search/SearchList.js","components/Search/index.js","hook.js","components/Checkbox/constant.js","components/Checkbox/CheckboxItem.js","components/Checkbox/index.js","App/index.js","index.js"],"names":["cancelToken","NEWS","initialState","data","loading","error","keyword","reducer","state","action","type","payload","hits","filter","item","title","store","createStore","applyMiddleware","thunk","memo","useSelector","className","map","_highlightResult","objectID","url","_tags","story_text","urlHighlight","key","href","target","rel","dangerouslySetInnerHTML","__html","value","length","index","SearchIcon","xmlns","width","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","cx","cy","r","x1","y1","x2","y2","Loader","dispatch","useDispatch","useState","setValue","effect","delay","deps","callback","useCallback","timeoutId","useRef","useEffect","clearTimeout","current","setTimeout","useDebounce","query","a","cancel","axios","CancelToken","source","encodeURIComponent","token","message","handleChange","e","autoFocus","onChange","placeholder","CHECKBOX_STATUS","NESTED_OBJECT","name","items","status","onClick","checkboxRef","useLayoutEffect","indeterminate","checked","ref","checkboxStatus","setCheckboxStatus","nestedObj","useMemo","setParent","uuidv4","forEach","el","parent","handleToggle","nextStatus","updateChildrenStatus","updateParentStatus","countCheckedChildren","reduce","sum","countPartialCheckedChildren","renderCheckbox","style","marginLeft","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.b341973c.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst NEWS = {\n  FETCHING: 'NEWS_FETCHING',\n  SUCCESS: 'NEWS_FETCH_SUCCESS',\n  FAIL: 'NEWS_FETCH_FAIL',\n};\n\nlet cancelToken;\nconst CANCEL_MESSAGE = 'Cancel fetchNews request';\n\nexport const fetchNews = (query) => async (dispatch) => {\n  dispatch({ type: NEWS.FETCHING });\n  try {\n    if (cancelToken) cancelToken.cancel(CANCEL_MESSAGE);\n    cancelToken = axios.CancelToken.source();\n    const { data } = await axios({\n      url: `https://hn.algolia.com/api/v1/search?query=${encodeURIComponent(\n        query,\n      )}`,\n      cancelToken: cancelToken.token,\n    });\n\n    dispatch({\n      type: NEWS.SUCCESS,\n      payload: data,\n    });\n  } catch (error) {\n    if (error?.message !== CANCEL_MESSAGE) {\n      dispatch({\n        type: NEWS.FAIL,\n        payload: 'Sorry, something went wrong, please try again!',\n      });\n    }\n  }\n};\n\nconst initialState = {\n  data: [],\n  loading: null,\n  error: null,\n  keyword: '',\n};\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case NEWS.FETCHING:\n      return { ...state, loading: true };\n    case NEWS.SUCCESS:\n      // remove items dont have title\n      const data = action.payload.hits?.filter((item) => item.title) ?? [];\n      return { loading: false, data, error: null, keyword: action.keyword };\n    case NEWS.FAIL:\n      return { loading: false, error: action.payload, data: [] };\n    default:\n      return state;\n  }\n};\n\nexport default reducer;\n","import { applyMiddleware, createStore } from 'redux';\nimport reducer from './components/Search/reducer';\nimport thunk from 'redux-thunk';\n\nconst store = createStore(reducer, applyMiddleware(thunk));\n\nexport default store;\n","import React, { memo } from 'react';\nimport { useSelector } from 'react-redux';\n\nconst SearchList = () => {\n  const { data, loading, error } = useSelector((state) => state);\n\n  const renderEmpty = () => {\n    if (loading || error || data.length > 0) return null;\n    return <div className=\"news-empty flex-center\">Not Found</div>;\n  };\n\n  const renderError = () => {\n    if (!error || loading) return null;\n    return <div className=\"news-error flex-center\">{error}</div>;\n  };\n\n  // prevent show Not found when mounting component\n  if (loading === null) return null;\n  return (\n    <div className=\"news-container\">\n      {data?.map((item) => {\n        const { _highlightResult, objectID, url, _tags } = item;\n        const { title, story_text, url: urlHighlight } = _highlightResult || {};\n        return (\n          <div key={objectID} className=\"news-item\">\n            {title && (\n              <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">\n                {urlHighlight && (\n                  <div\n                    className=\"news-item-url\"\n                    dangerouslySetInnerHTML={{ __html: urlHighlight.value }}\n                  />\n                )}\n                <div\n                  className=\"news-item-title\"\n                  dangerouslySetInnerHTML={{ __html: title.value }}\n                />\n              </a>\n            )}\n            {_tags?.length > 0 && (\n              <div className=\"flex-row\">\n                {_tags.map((item, index) => (\n                  <div className=\"news-item-tag flex-center\" key={index}>\n                    {item}\n                  </div>\n                ))}\n              </div>\n            )}\n            {story_text && (\n              <div\n                className=\"news-item-content\"\n                dangerouslySetInnerHTML={{ __html: story_text.value }}\n              />\n            )}\n          </div>\n        );\n      })}\n      {renderEmpty()}\n      {renderError()}\n    </div>\n  );\n};\n\nexport default memo(SearchList);\n","import React, { memo, useCallback, useState } from 'react';\nimport SearchList from './SearchList';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { fetchNews } from './reducer';\nimport './Search.css';\nimport { useDebounce } from '../../hook';\n\nconst SearchIcon = memo(() => {\n  return (\n    <span className=\"search-icon\">\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        width=\"24\"\n        height=\"24\"\n        viewBox=\"0 0 24 24\"\n        fill=\"none\"\n        stroke=\"currentColor\"\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      >\n        <circle cx=\"11\" cy=\"11\" r=\"8\" />\n        <line x1=\"21\" y1=\"21\" x2=\"16.65\" y2=\"16.65\" />\n      </svg>\n    </span>\n  );\n});\n\nconst Loader = memo(() => {\n  const loading = useSelector((state) => state.loading);\n  if (!loading) return null;\n  return <div className=\"search-loader\" />;\n});\n\nconst Search = () => {\n  const dispatch = useDispatch();\n  const [value, setValue] = useState('');\n\n  useDebounce(() => dispatch(fetchNews(value)), 100, [value]);\n\n  const handleChange = useCallback((e) => {\n    setValue(e.target.value);\n  }, []);\n\n  return (\n    <>\n      <div className=\"search-header flex-row flex-center\">\n        <div className=\"search-input-container flex-row\">\n          <SearchIcon />\n          <input\n            autoFocus\n            onChange={handleChange}\n            placeholder=\"Searchâ€¦\"\n            className=\"search-input\"\n          />\n          <Loader />\n        </div>\n      </div>\n      <SearchList />\n    </>\n  );\n};\n\nexport default memo(Search);\n","import { useCallback, useEffect, useRef } from 'react';\n\nexport const useDebounce = (effect, delay, deps) => {\n  const callback = useCallback(effect, deps);\n  const timeoutId = useRef();\n\n  useEffect(() => {\n    clearTimeout(timeoutId.current);\n    timeoutId.current = setTimeout(callback, delay);\n\n    return () => clearTimeout(timeoutId.current);\n  }, [callback, delay]);\n};\n","export const CHECKBOX_STATUS = {\n  CHECKED: 1,\n  UNCHECKED: 0,\n  PARTIAL_CHECKED: -1,\n};\n\nexport const NESTED_OBJECT = {\n  name: 'level 1',\n  items: [\n    {\n      name: ' level 2',\n      items: [\n        {\n          name: 'level 3',\n        },\n        {\n          name: 'level 3',\n          items: [\n            {\n              name: 'level 4',\n              items: [\n                {\n                  name: 'level 5',\n                  items: [\n                    {\n                      name: 'level 6',\n                    },\n                    {\n                      name: 'level 6',\n                    },\n                  ],\n                },\n                {\n                  name: 'level 5',\n                },\n              ],\n            },\n          ],\n        },\n        {\n          name: 'level 3',\n          items: [\n            {\n              name: 'level 4',\n            },\n            {\n              name: 'level 4',\n            },\n          ],\n        },\n      ],\n    },\n    {\n      name: 'level 2',\n      items: [\n        {\n          name: 'level 3',\n        },\n      ],\n    },\n  ],\n};\n","import { CHECKBOX_STATUS } from './constant';\nimport React, { memo, useLayoutEffect, useRef } from 'react';\n\nconst CheckboxItem = ({ status, onClick, item }) => {\n  const checkboxRef = useRef();\n\n  useLayoutEffect(() => {\n    // Currently, React not support an indeterminate prop for checkbox inputs,\n    // so I workaround by set indeterminate property via DomNode\n    checkboxRef.current.indeterminate =\n      status === CHECKBOX_STATUS.PARTIAL_CHECKED;\n  }, [status]);\n\n  return (\n    <div>\n      <input\n        type=\"checkbox\"\n        checked={status === CHECKBOX_STATUS.CHECKED}\n        ref={checkboxRef}\n        onChange={() => onClick(item)}\n      />\n      <span>{item.name}</span>\n    </div>\n  );\n};\n\nexport default memo(CheckboxItem);\n","import React, { memo, useCallback, useMemo, useState } from 'react';\nimport { CHECKBOX_STATUS, NESTED_OBJECT } from './constant';\nimport CheckboxItem from './CheckboxItem';\nimport { v4 as uuidv4 } from 'uuid';\n\nconst Checkbox = () => {\n  // Obj contain all status of checkbox, accessed by key\n  const [checkboxStatus, setCheckboxStatus] = useState({});\n\n  const nestedObj = useMemo(() => {\n    const setParent = (item) => {\n      item.key = uuidv4();\n      if (item.items) {\n        item.items.forEach((el) => {\n          el.parent = item;\n          setParent(el);\n        });\n      }\n    };\n\n    setParent(NESTED_OBJECT);\n    return NESTED_OBJECT;\n  }, []);\n\n  const handleToggle = useCallback((item) => {\n    //prevent stale closures\n    setCheckboxStatus((checkboxStatus) => {\n      const { key, parent } = item;\n\n      const nextStatus =\n        checkboxStatus[key] === CHECKBOX_STATUS.CHECKED\n          ? CHECKBOX_STATUS.UNCHECKED\n          : CHECKBOX_STATUS.CHECKED;\n\n      const updateChildrenStatus = (item, status) => {\n        const { key, items } = item;\n        checkboxStatus[key] = status;\n        if (items) {\n          items.forEach((el) => {\n            updateChildrenStatus(el, status);\n          });\n        }\n      };\n      updateChildrenStatus(item, nextStatus);\n\n      const updateParentStatus = (item) => {\n        if (!item) return;\n\n        const { items, parent, key } = item;\n        const countCheckedChildren = items.reduce(\n          (sum, el) =>\n            (sum += checkboxStatus[el.key] === CHECKBOX_STATUS.CHECKED),\n          0,\n        );\n        const countPartialCheckedChildren = items.reduce(\n          (sum, el) =>\n            (sum += checkboxStatus[el.key] === CHECKBOX_STATUS.PARTIAL_CHECKED),\n          0,\n        );\n\n        let status;\n        if (countCheckedChildren === items.length)\n          status = CHECKBOX_STATUS.CHECKED;\n        else if (countPartialCheckedChildren > 0 || countCheckedChildren > 0)\n          status = CHECKBOX_STATUS.PARTIAL_CHECKED;\n        else status = CHECKBOX_STATUS.UNCHECKED;\n\n        checkboxStatus[key] = status;\n\n        updateParentStatus(parent);\n      };\n      updateParentStatus(parent);\n\n      return { ...checkboxStatus };\n    });\n  }, []);\n\n  const renderCheckbox = (item) => {\n    const { items, key } = item;\n    return (\n      <div key={key}>\n        <CheckboxItem\n          item={item}\n          status={checkboxStatus[key]}\n          onClick={handleToggle}\n        />\n        <div style={{ marginLeft: 20 }}>\n          {items?.map((el) => renderCheckbox(el))}\n        </div>\n      </div>\n    );\n  };\n\n  return renderCheckbox(nestedObj);\n};\n\nexport default memo(Checkbox);\n","import React from 'react';\nimport './App.css';\nimport { Provider } from 'react-redux';\nimport store from '../store';\nimport Search from '../components/Search';\nimport Checkbox from '../components/Checkbox';\n\nconst App = () => {\n  return (\n    <Provider store={store}>\n      <div className=\"flex-row\">\n        <div className=\"app-content\">\n          <Search />\n        </div>\n        <div className=\"divider-horizontal\" />\n        <div className=\"app-content\">\n          <Checkbox />\n        </div>\n      </div>\n    </Provider>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './style.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}